\documentclass[14pt, a4paper]{extreport}
\usepackage[utf8]{inputenc}
\usepackage{fontspec}
\usepackage[english,russian]{babel}
\usepackage[left=2cm, right=1cm, vmargin=2cm]{geometry}
\usepackage{indentfirst}
\usepackage[nodisplayskipstretch]{setspace}
\usepackage[]{amsfonts}
\usepackage[]{amsmath}
\usepackage[]{tikz}  
\usetikzlibrary{graphs}
\usepackage[]{istgame}
\usepackage[]{forest}

\usepackage[]{titlesec}
\usepackage[dotinlabels]{titletoc}
\usepackage[page,toc,titletoc,title]{appendix}
\usepackage[]{lipsum}
\usepackage[]{caption}
\usepackage{enumitem}
\usepackage{listings}


\titleformat{\chapter}{\filcenter\normalfont\bfseries\MakeUppercase}{Глава \thechapter.}{1em}{}
\titleformat{\section}{\filcenter\normalfont\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\filcenter\normalfont\bfseries}{\thesubsection.}{1em}{}
\titleformat{\appendix}{\filcenter\normalfont\bfseries}{}{1em}{}

\titlespacing*{\section}{1pt}{1pt}{1pt}
\titlespacing*{\chapter}{1pt}{1pt}{1pt}

\titlecontents{chapter}[0em]{\normalsize}{ГЛАВА\space\thecontentslabel.\space\MakeUppercase}{}{\normalfont\dotfill\makebox[0em][l]{\thecontentspage}}
\titlecontents{section}[2em]{\normalsize}{\thecontentslabel.\space}{}{\normalfont\dotfill\makebox[0em][l]\thecontentspage}
\titlecontents{subsection}[4em]{\normalsize}{\thecontentslabel.\space}{}{\normalfont\dotfill\makebox[0em][l]\thecontentspage}

%\dottedcontents{section}[2cm]{}{1.5em}{1pc}
%\dottedcontents{subsection}[4cm]{}{2em }{2pc}
%\setlength{\cftsubsecindent}{2cm}
%\setlength{\cftsubsubsecindent}{4cm}

\setlist[enumerate,itemize]{leftmargin=19mm,partopsep=0pt,topsep=0pt,itemsep=0.3cm,noitemsep}


\setmainfont{CMU Serif}
\setsansfont{CMU Sans Serif}
\setmonofont{CMU Typewriter Text}
\setlength\parindent{1.2cm}
%\onehalfspacing
\doublespacing

%\setmainfont{Times New Roman}
\usepackage[hidelinks]{hyperref}


%Set forest

\forestset{
	end node/.style={draw,rectangle, fill=gray!10,minimum width=1cm},
	chess tree/.style={for tree={align=center,edge={-latex},s sep=1cm,l sep=.8cm,
			where n children=0{end node, edge={-}}{delay={draw, circle,minimum size=1cm, 
					if={iseven(level())}{fill=white}{fill=black!20}}},
				label={[anchor=south]above:#1},	
			}},
	move/.style={if n=1{edge label={node[midway,left]{#1}}}
		{edge label={node [midway, right]{#1}}}},
}


\begin{document}
	\include{iip/title}
	
	
	\setcounter{page}{2}
	
	
	\begin{NoHyper}
		\tableofcontents
		\clearpage
	\end{NoHyper}
	
	
	
		
	
	\include{iip/intro}
	
	{
		{
			\include{iip/theory1}
			
		}
	}
	
	{
		\include{iip/realiz1}
		
	}
	\include{iip/conclusion}
	
	\include{iip/biblio}
	
	\include{iip/appendix}
	
\end{document}
